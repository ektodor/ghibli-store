import{_ as g,r as i,o as a,c as r,b as t,F as u,g as b,a as c,t as l}from"./index-8bj8ABOS.js";var M={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_API_NAME:"ektodorwang-api",BASE_URL:"/https://github.com/ektodor/ghibli-store.git/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:C,VITE_APP_API_NAME:f}=M,E={data(){return{products:[],tempProduct:{},isCreateModal:!1,pagination:{},openEditModal:null,openDeleteModal:null}},methods:{openModal(s,e={}){if(this.tempProduct=JSON.parse(JSON.stringify(e)),s==="delete"){this.openDeleteModal();return}s==="edit"?this.isCreateModal=!1:this.isCreateModal=!0,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.openEditModal()},readProducts(s){this.$http.get(`${C}/api/${f}/admin/products?page=${s}`).then(e=>{this.products=e.data.products,this.pagination=e.data.pagination}).catch(e=>{console.error(e.message),alert("讀取資料失敗")})}},mounted(){this.readProducts(1)}},k={class:"table text-center"},A=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120"},"原價"),t("th",{width:"120"},"售價"),t("th",{width:"100"},"是否啟用"),t("th",{width:"120"},"編輯")])],-1),x={class:"text-end"},y={class:"text-end"},v={key:0,class:"text-success"},R={key:1},I={class:"btn-group"},V=["onClick"],w=["onClick"],D={class:"text-end mt-auto"};function N(s,e,O,S,n,d){const p=i("paginationComponent"),_=i("editProductComponent"),h=i("deleteProductComponent");return a(),r(u,null,[t("table",k,[A,t("tbody",null,[(a(!0),r(u,null,b(n.products,(o,P)=>(a(),r("tr",{key:P},[t("td",null,l(o.category),1),t("td",null,l(o.title),1),t("td",x,l(o.origin_price),1),t("td",y,l(o.price),1),t("td",null,[o.is_enabled?(a(),r("span",v,"啟用")):(a(),r("span",R,"未啟用"))]),t("td",null,[t("div",I,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:m=>d.openModal("edit",o)}," 編輯 ",8,V),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:m=>d.openModal("delete",o)}," 刪除 ",8,w)])])]))),128))])]),t("div",D,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=o=>d.openModal("create"))},"建立新的產品")]),c(p,{index:s.index,pagination:n.pagination,onChangePage:d.readProducts},null,8,["index","pagination","onChangePage"]),c(_,{"temp-Product":n.tempProduct,"is-Create-Modal":n.isCreateModal,onReadProducts:d.readProducts,onOpenModal:e[1]||(e[1]=o=>n.openEditModal=o)},null,8,["temp-Product","is-Create-Modal","onReadProducts"]),c(h,{"temp-Product":n.tempProduct,onReadProducts:d.readProducts,onOpenModal:e[2]||(e[2]=o=>n.openDeleteModal=o)},null,8,["temp-Product","onReadProducts"])],64)}const B=g(E,[["render",N]]);export{B as default};
