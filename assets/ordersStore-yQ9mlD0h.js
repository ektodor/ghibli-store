import{l as c,p as a}from"./index-zk9T54vD.js";var d={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_API_NAME:"ektodorwang-api",BASE_URL:"/ghibli-store/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:s,VITE_APP_API_NAME:o}=d,u=c("ordersStore",{state:()=>({cart:[]}),actions:{addProduct(t,e=1,r=null){a.post(`${s}/api/${o}/cart`,{data:{product_id:t,qty:e}}).then(()=>{this.getCartProducts(),alert("購物車更新成功"),r&&r.hide()}).catch(i=>{this.errorMessage(i,"加入購物車失敗")})},getCartProducts(){a.get(`${s}/api/${o}/cart`).then(t=>{this.cart=JSON.parse(JSON.stringify(t.data.data))}).catch(t=>{this.errorMessage(t,"取得購物車列表失敗")})},deleteProduct(t){this.isCartLoading=!0,a.delete(`${s}/api/${o}/cart/${t}`).then(()=>{this.getCartProducts(),alert("購物車更新成功")}).catch(e=>{this.errorMessage(e,"刪除購物車項目失敗 (單一)")})},deleteAllProducts(){a.delete(`${s}/api/${o}/carts`).then(()=>{this.getCartProducts(),alert("購物車更新成功")}).catch(t=>{this.errorMessage(t,"刪除購物車項目失敗 (全部)")})},updateCartQuantity(t,e,r){this.isCartLoading=!0,a.put(`${s}/api/${o}/cart/${t}`,{data:{product_id:e,qty:r}}).then(()=>{this.getCartProducts(),alert("購物車更新成功")}).catch(i=>{this.errorMessage(i,"更改產品數量失敗")})},checkoutProducts(t,e){a.post(`${s}/api/${o}/order`,{data:{user:t,message:e}}).then(()=>{this.getCartProducts(),alert("商品已完成結帳")}).then(r=>{this.errorMessage(r,"結帳失敗")})},errorMessage(t,e){console.log(t),alert(e)}},getters:{getOrdersNum({cart:t}){var e;return(e=t.carts)==null?void 0:e.length}}});export{u as o};
